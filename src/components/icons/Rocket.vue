<template>
  <svg id="rocketgroup" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 207.8922 237.6115">
    <path id="flame"
          d="M128,174.5073a2.8077,2.8077,0,0,1-1.4648-.4117c-6.103-3.7447-10.0465-13.5671-10.0465-25.0252a41.42,41.42,0,0,1,2.924-15.7909,2.8041,2.8041,0,0,1,2.5852-1.72h12.0014a2.801,2.801,0,0,1,2.5851,1.72,41.3764,41.3764,0,0,1,2.9241,15.7909c0,11.4581-3.9435,21.28-10.0437,25.0252A2.7819,2.7819,0,0,1,128,174.5073Zm-4.0668-37.3459A37.7352,37.7352,0,0,0,122.09,149.07c0,9.3239,2.8456,16.0122,5.91,19.0707,3.0613-3.0585,5.9069-9.744,5.9069-19.0707a37.6969,37.6969,0,0,0-1.8429-11.909Z"
          transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
    <g id="trail">
      <path d="M128,239.5755a2.8,2.8,0,0,1-2.8008-2.8008v-46.88a2.8008,2.8008,0,1,1,5.6016,0v46.88A2.8,2.8,0,0,1,128,239.5755Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M101.5716,214.3011A2.8,2.8,0,0,1,98.7708,211.5V157.35a2.8008,2.8008,0,1,1,5.6016,0V211.503A2.7977,2.7977,0,0,1,101.5716,214.3011Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M154.4284,219.0568a2.7982,2.7982,0,0,1-2.8008-2.8008V162.1025a2.8008,2.8008,0,0,1,5.6016,0V216.256A2.8018,2.8018,0,0,1,154.4284,219.0568Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
    </g>
    <g id="star1">
      <path d="M185.8925,30.3613h-3.26a2.8008,2.8008,0,1,1,0-5.6016h3.26a2.8008,2.8008,0,0,1,0,5.6016Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M202.238,30.3613h-3.2629a2.8008,2.8008,0,0,1,0-5.6016h3.2629a2.8008,2.8008,0,1,1,0,5.6016Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M192.4352,23.8186a2.8,2.8,0,0,1-2.8008-2.8008v-3.26a2.8008,2.8008,0,1,1,5.6016,0v3.26A2.8,2.8,0,0,1,192.4352,23.8186Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M192.4352,40.1641a2.8,2.8,0,0,1-2.8008-2.8008V34.1a2.8008,2.8008,0,1,1,5.6016,0v3.2629A2.8,2.8,0,0,1,192.4352,40.1641Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
    </g>
    <g id="star2">
      <path d="M30.4173,145.1941H27.1544a2.8008,2.8008,0,0,1,0-5.6016h3.2629a2.8008,2.8008,0,1,1,0,5.6016Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M46.76,145.1941H43.5a2.8008,2.8008,0,1,1,0-5.6016h3.2629a2.8008,2.8008,0,1,1-.0028,5.6016Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M36.9572,138.6514a2.8,2.8,0,0,1-2.8008-2.8008v-3.26a2.8008,2.8008,0,0,1,5.6016,0v3.26A2.8018,2.8018,0,0,1,36.9572,138.6514Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
      <path d="M36.9572,154.9969a2.8,2.8,0,0,1-2.8008-2.8008v-3.2629a2.8008,2.8008,0,0,1,5.6016,0v3.2629A2.8018,2.8018,0,0,1,36.9572,154.9969Z"
            transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
    </g>
    <path id="star3"
          d="M229.445,174.5185a2.81,2.81,0,0,1-1.0643-.1933,3.2241,3.2241,0,0,1-.9243-.6189,3.539,3.539,0,0,1-.6162-.9215,2.7657,2.7657,0,0,1-.196-1.0671,2.8008,2.8008,0,1,1,5.6016,0,2.79,2.79,0,0,1-.2241,1.0671,2.6031,2.6031,0,0,1-.5881.9215,3.2826,3.2826,0,0,1-.9243.6189A2.7572,2.7572,0,0,1,229.445,174.5185Z"
          transform="translate(-24.3536 -1.964)" fill="#f8860f"/>
    <g id="rocket">
      <path d="M148.8268,137.1614H107.1732a2.8038,2.8038,0,0,1-2.5851-1.72c-6.2906-15.0571-9.6151-33.083-9.6151-52.1257,0-36.83,12.682-69.359,31.5622-80.94a2.8118,2.8118,0,0,1,2.93,0c18.8774,11.5813,31.5594,44.11,31.5594,80.94,0,19.0483-3.3273,37.0714-9.6151,52.1257A2.7971,2.7971,0,0,1,148.8268,137.1614ZM109.0582,131.56H146.939c5.5512-14.0236,8.4808-30.6575,8.4808-48.2438,0-33.4135-11.2-63.9142-27.4226-75.2071C111.775,19.4018,100.5718,49.9,100.5718,83.316,100.5746,100.9,103.5042,117.5334,109.0582,131.56Z"
            transform="translate(-24.3536 -1.964)" fill="#fff"/>
      <path d="M80.1875,152.6947a2.8076,2.8076,0,0,1-2.8008-2.8008V122.62a2.78,2.78,0,0,1,.5182-1.6217l18.2-25.6357a2.8022,2.8022,0,0,1,5.075,1.3752,124.8143,124.8143,0,0,0,8.5817,36.5448,2.8011,2.8011,0,0,1-1.1876,3.5066L81.5851,152.3222A2.832,2.832,0,0,1,80.1875,152.6947Zm2.8008-29.1816v21.5382l20.6783-11.9006a128.3384,128.3384,0,0,1-7.2344-28.5766Z"
            transform="translate(-24.3536 -1.964)" fill="#fff"/>
      <path d="M175.8125,152.6947a2.77,2.77,0,0,1-1.3976-.3753l-26.9886-15.5333a2.7981,2.7981,0,0,1-1.1875-3.5066,124.7008,124.7008,0,0,0,8.5817-36.5448,2.8,2.8,0,0,1,5.0722-1.3752l18.2,25.6357a2.8064,2.8064,0,0,1,.5182,1.6217v27.2742a2.7949,2.7949,0,0,1-1.3976,2.4227A2.7508,2.7508,0,0,1,175.8125,152.6947Zm-23.4791-19.544,20.6783,11.9006V123.5131l-13.4439-18.9362A127.9735,127.9735,0,0,1,152.3334,133.1507Z"
            transform="translate(-24.3536 -1.964)" fill="#fff"/>
      <path id="hublot"
            d="M128,88.4667a18.8522,18.8522,0,1,1,18.8522-18.8522A18.8735,18.8735,0,0,1,128,88.4667Zm0-32.1056a13.2506,13.2506,0,1,0,13.2506,13.2506A13.2663,13.2663,0,0,0,128,56.3611Z"
            transform="translate(-24.3536 -1.964)" fill="#fff"/>
    </g>
    <path id="bluestar5"
          d="M51.6866,61.8759a9.758,9.758,0,1,1,9.758-9.758A9.7693,9.7693,0,0,1,51.6866,61.8759Zm0-13.9172a4.1564,4.1564,0,1,0,4.1564,4.1564A4.1621,4.1621,0,0,0,51.6866,47.9587Z"
          transform="translate(-24.3536 -1.964)" fill="#fff"/>
    <path id="bluestar4"
          d="M219.6422,127.5435a9.758,9.758,0,1,1,9.758-9.758A9.7694,9.7694,0,0,1,219.6422,127.5435Zm0-13.9144a4.1564,4.1564,0,1,0,4.1564,4.1564A4.1621,4.1621,0,0,0,219.6422,113.6291Z"
          transform="translate(-24.3536 -1.964)" fill="#fff"/>
    <path id="bluestar3"
          d="M33.389,98.9a2.76,2.76,0,0,1-1.0643-.1961,3.5519,3.5519,0,0,1-.9243-.6161,2.768,2.768,0,0,1-.5882-.8963,3.0465,3.0465,0,0,1-.224-1.0923,2.7887,2.7887,0,0,1,.224-1.0643A3.2354,3.2354,0,0,1,31.4,94.11a2.6152,2.6152,0,0,1,.9243-.5882,2.802,2.802,0,0,1,2.1286,0,2.8908,2.8908,0,0,1,.9242.5882,3.2332,3.2332,0,0,1,.5882.9243,2.3478,2.3478,0,0,1,.2241,1.0643,2.5464,2.5464,0,0,1-.2241,1.0923,2.7664,2.7664,0,0,1-.5882.8963A2.82,2.82,0,0,1,33.389,98.9Z"
          transform="translate(-24.3536 -1.964)" fill="#fff"/>
    <path id="bluestar1"
          d="M212.64,73.6925a1.9064,1.9064,0,0,1-.56-.056,3.3871,3.3871,0,0,1-.5041-.14,4.5325,4.5325,0,0,1-.5042-.28,2.0542,2.0542,0,0,1-.42-.3361,2.8063,2.8063,0,0,1,0-3.9492,4.9024,4.9024,0,0,1,.42-.3641,4.232,4.232,0,0,1,.5042-.252,3.5354,3.5354,0,0,1,.5041-.1681,2.8161,2.8161,0,0,1,3.361,2.7448,3.7987,3.7987,0,0,1-.056.56,3.1155,3.1155,0,0,1-.4229,1.0082l-.3361.42A2.8137,2.8137,0,0,1,212.64,73.6925Z"
          transform="translate(-24.3536 -1.964)" fill="#fff"/>
    <path id="bluestar2"
          d="M78.2018,23.2781a2.82,2.82,0,0,1-1.9886-.8122,2.8928,2.8928,0,0,1-.8122-1.9886,2.7887,2.7887,0,0,1,.224-1.0643,3.2354,3.2354,0,0,1,.5882-.9243,2.9324,2.9324,0,0,1,3.9771,0,3.2332,3.2332,0,0,1,.5882.9243,2.7888,2.7888,0,0,1,.2241,1.0643,2.9451,2.9451,0,0,1-.8123,1.9886A2.82,2.82,0,0,1,78.2018,23.2781Z"
          transform="translate(-24.3536 -1.964)" fill="#fff"/>
  </svg>
</template>

<script setup lang="ts">
import { gsap } from "gsap";
import {onMounted} from "vue";
onMounted (() => {
  gsap.set("#rocketgroup", {xPercent: -50, yPercent: -1});
  const rocket = document.getElementById("rocketgroup");
  const pos = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
  const mouse = { x: pos.x, y: pos.y };
  const speed = 0.05;
  const xSet = gsap.quickSetter(rocket, "x", "px");
  const ySet = gsap.quickSetter(rocket, "y", "px");
  let lastDx = 0;
  let lastDy = 0;

  window.addEventListener("mousemove", e => {
    mouse.x = e.x;
    mouse.y = e.y;
  });

  window.addEventListener("touchmove", e => {
    mouse.x = e.changedTouches[0].pageX;
    mouse.y = e.changedTouches[0].pageY;
  });

  gsap.ticker.add(() => {
    // adjust speed for higher refresh monitors
    const dt = 1.0 - Math.pow(1.0 - speed, gsap.ticker.deltaRatio());

    pos.x += (mouse.x - pos.x) * dt;
    pos.y += (mouse.y - pos.y) * dt;
    xSet(pos.x);
    ySet(pos.y);

    const dx = mouse.x - pos.x;
    const dy = mouse.y - pos.y;

    if(Math.abs(lastDx - dx) > 0.01 || Math.abs(lastDy - dy) > 0.01) {
      const rotation = Math.atan2(dx, -dy);
      gsap.set(rocket, { rotation: rotation + "_rad" });
      lastDx = dx;
      lastDy = dy;
    }
  });
})


</script>